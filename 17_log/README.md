# Домашнее задание. Настраиваем центральный сервер для сбора логов

## Описание задания

Что нужно сделать?

поднимаем 2 машины web и log

на web поднимаем nginx

на log настраиваем центральный лог сервер на journald

настраиваем аудит, следящий за изменением конфигов нжинкса

## Решение

Реализовано в Yandex Cloud (для проверки потребуется настроенный `cli`)

Для создания и настройки тестовой тестовой среды использовать скрипт
```bash
./up-vm.sh
```
При выполнении этого скрипта будут созданы две виртуальные машыны `web` и `log`. Они будут разположены в одной подсети и могут быть поступны по `hostname`. Но внешний ip адрес будет только у `web`. Она же будет выступать в качестве `jumphost` для доступа к `log`. Чтобы подключиться по ssh к `log` используем команду:
```bash
ssh -J yc-user@vm_web_ip yc-user@log
```
Чтобы подключиться к `web` используем команду
```bash
ssh -l yc-user vm_web_ip
```
Также будет выполнен ansible playbook, который сделает все необходимые настройки

После проверки задания виртуальную машину можно удалить с помощью

```
./down-vm.sh
```